!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports.ReactHistory=e(require("react")):t.ReactHistory=e(t.React)}(this,function(t){return function(t){function e(o){if(r[o])return r[o].exports;var n=r[o]={exports:{},id:o,loaded:!1};return t[o].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0,e.ControlledHistory=void 0;var n=r(1),i=o(n);e.ControlledHistory=i["default"]},function(t,e,r){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=r(5),c=o(a),u=r(2),p=[void 0],h=function(t){function e(r){n(this,e);var o=i(this,t.call(this,r)),s=r.history.location,a=!!s.key;return o.updatingFromHistoryChange=!1,o.syncingHistory=!1,o.keys=a?r.restoreKeys():p,o.setupHistory(),o.state={location:s,action:"POP"},o}return s(e,t),e.prototype.getChildContext=function(){return{history:this.props.history}},e.prototype.componentWillReceiveProps=function(t){if(!this.syncingHistory&&!this.updatingFromHistoryChange&&!(0,u.locationsAreEqual)(t.location,this.props.location)){this.syncingHistory=!0;var e=this.props.history,r=t.action,o=t.location,n=this.keys.indexOf(o.key);if(o.key&&n!==-1){var i=this.keys.indexOf(this.props.location.key),s=n-i;e.go(s)}else"PUSH"===r?e.push(o):"REPLACE"===r&&e.replace(o)}},e.prototype.setupHistory=function(){var t=this;this.props.history.listen(function(e,r){t.storeKey(e.key,r),t.updatingFromHistoryChange=!0,t.syncingHistory?t.props.onChange(e,"SYNC"):t.props.onChange(e,r),t.setState({location:e,action:r},function(){t.updatingFromHistoryChange=!1,t.syncingHistory?t.syncingHistory=!1:t.checkIfLocationAccepted()})})},e.prototype.checkIfLocationAccepted=function(){var t=this.props.location,e=this.state,r=e.location,o=e.action;if(!(0,u.locationsAreEqual)(t,r)){this.syncingHistory=!0;var n=this.keys.indexOf(t.key),i=this.keys.indexOf(r.key),s=n-i;"REPLACE"===o?this.props.history.replace(t):(i===-1?this.props.history.go(-1):this.props.history.go(s),"PUSH"===o&&this.keys.pop())}},e.prototype.storeKey=function(t,e){"PUSH"===e?this.keys.push(t):"REPLACE"===e&&(this.keys[this.keys.length-1]=t),this.keys.length>50&&this.keys.unshift(),this.props.saveKeys(this.keys)},e.prototype.render=function(){var t=this.props,e=t.history,r=t.location,o=t.action;return this.props.children({history:e,location:r,action:o})},e}(c["default"].Component);h.propTypes={children:a.PropTypes.func.isRequired,history:a.PropTypes.object.isRequired,location:a.PropTypes.object.isRequired,action:a.PropTypes.string.isRequired,onChange:a.PropTypes.func.isRequired,restoreKeys:a.PropTypes.func.isRequired,saveKeys:a.PropTypes.func.isRequired},h.childContextTypes={history:a.PropTypes.object.isRequired},h.defaultProps={restoreKeys:function(){return p},saveKeys:function(){}},e["default"]=h},function(t,e,r){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0,e.locationsAreEqual=e.createLocation=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},s=r(4),a=o(s),c=r(3),u=(e.createLocation=function(t,e,r,o){var n=void 0;return"string"==typeof t?(n=(0,c.parsePath)(t),n.state=e):(n=i({},t),void 0===n.pathname&&(n.pathname=""),n.search?"?"!==n.search.charAt(0)&&(n.search="?"+n.search):n.search="",n.hash?"#"!==n.hash.charAt(0)&&(n.hash="#"+n.hash):n.hash="",void 0!==e&&void 0===n.state&&(n.state=e)),n.key=r,o&&(n.pathname?"/"!==n.pathname.charAt(0)&&(n.pathname=(0,a["default"])(n.pathname,o.pathname)):n.pathname=o.pathname),n},function p(t,e){if(null==t)return t==e;var r="undefined"==typeof t?"undefined":n(t),o="undefined"==typeof e?"undefined":n(e);if(r!==o)return!1;if(Array.isArray(t))return!(!Array.isArray(e)||t.length!==e.length)&&t.every(function(t,r){return p(t,e[r])});if("object"===r){var i=Object.keys(t),s=Object.keys(e);return i.length===s.length&&i.every(function(r){return p(t[r],e[r])})}return t===e});e.locationsAreEqual=function(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&u(t.state,e.state)}},function(t,e){"use strict";e.__esModule=!0;e.addLeadingSlash=function(t){return"/"===t.charAt(0)?t:"/"+t},e.stripLeadingSlash=function(t){return"/"===t.charAt(0)?t.substr(1):t},e.stripPrefix=function(t,e){return 0===t.indexOf(e)?t.substr(e.length):t},e.parsePath=function(t){var e=t||"/",r="",o="",n=e.indexOf("#");n!==-1&&(o=e.substr(n),e=e.substr(0,n));var i=e.indexOf("?");return i!==-1&&(r=e.substr(i),e=e.substr(0,i)),{pathname:e,search:"?"===r?"":r,hash:"#"===o?"":o}},e.createPath=function(t){var e=t.pathname,r=t.search,o=t.hash,n=e||"/";return r&&"?"!==r&&(n+="?"===r.charAt(0)?r:"?"+r),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}},function(t,e){"use strict";var r=function(t){return"/"===t.charAt(0)},o=function(t,e){for(var r=e,o=r+1,n=t.length;o<n;r+=1,o+=1)t[r]=t[o];t.pop()},n=function(t){var e=arguments.length<=1||void 0===arguments[1]?"":arguments[1],n=t&&t.split("/")||[],i=e&&e.split("/")||[],s=t&&r(t),a=e&&r(e),c=s||a;if(t&&r(t)?i=n:n.length&&(i.pop(),i=i.concat(n)),!i.length)return"/";var u=void 0;if(i.length){var p=i[i.length-1];u="."===p||".."===p||""===p}else u=!1;for(var h=0,f=i.length;f>=0;f--){var y=i[f];"."===y?o(i,f):".."===y?(o(i,f),h++):h&&(o(i,f),h--)}if(!c)for(;h--;h)i.unshift("..");!c||""===i[0]||i[0]&&r(i[0])||i.unshift("");var l=i.join("/");return u&&"/"!==l.substr(-1)&&(l+="/"),l};t.exports=n},function(e,r){e.exports=t}])});